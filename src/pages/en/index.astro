---
import MainLayout from "../../layouts/MainLayout.astro";

---

<MainLayout title="The Slow Road Back | Home">
  <div
    transition:name="hero-card"
    class="m-4 md:m-12 p-6 md:p-8 bg-gray-900 bg-opacity-70 rounded-xl backdrop-blur-sm text-center text-white max-w-4xl mx-auto"
  >
    <h1 class="font-display text-4xl md:text-7xl font-bold">
      The Slow Road Back
    </h1>

    <p class="font-display text-2xl md:text-4xl font-bold text-blue-500 mt-4">
      #RIDING4GBS
    </p>

    <div id="countdown" class="my-6 font-sans">
      <div id="cd-display" class="flex justify-center items-center gap-2 md:gap-4">
      </div>
      <p id="cd-message" class="text-lg mt-2"></p>
    </div>

    <div class="font-sans text-left text-sm md:text-lg max-w-3xl mx-auto space-y-6">
      <p>
        My name is Martin, and I am a survivor of Guillain-Barré Syndrome (GBS). [cite: 184] My recovery taught me that the journey is more important than the destination. [cite: 185] This is my <strong>'Slow Road Back'.</strong>
      </p>
      <p>
        <strong>On September 30th, 2026</strong>, I will begin a deeply personal cycling challenge, starting from my home in Pamplona. [cite: 187] My goal is to ride into the heart of the Pyrenees, to traverse the mountains from the Atlantic coast to the Mediterranean, and to see how far this journey of recovery and resilience will take me.
      </p>
      <p>
        This ride is a mission to raise vital awareness and funds for the GBS community. [cite: 189] I don't know exactly how many days it will take, or how many mountains I'll have to climb. [cite: 190] But I invite you to follow along, day by day, on this journey of hope and resilience.
      </p>

      <div class="mt-8 md:mt-12">
        <p class="font-sans font-bold">In proud partnership with</p>
        <div
          class="mt-4 flex flex-col md:flex-row justify-center items-center gap-6 md:gap-8"
        >
          <div
            class="flex flex-col items-center justify-between gap-4 p-6 bg-white rounded-lg h-40 w-64"
          >
            <img
              src="/logos/INUK-Wordmark-Logo_RGB.png"
              alt="Inflammatory Neuropathies UK Logo"
              class="max-h-16 object-contain"
            />
            <a
              href="#"
              class="font-sans bg-gray-200 text-gray-800 px-6 py-2 rounded-md hover:bg-gray-300"
            >
              Visit Website
            </a>
          </div>

          <div
            class="flex flex-col items-center justify-between gap-4 p-6 bg-white rounded-lg h-40 w-64"
          >
            <img
              src="/logos/GBS-CIDP_neuropatias-RC-3.png"
              alt="Neuropatías España Logo"
              class="max-h-16 object-contain"
            />
            <a
              href="#"
              class="font-sans bg-gray-200 text-gray-800 px-6 py-2 rounded-md hover:bg-gray-300"
            >
              Visita el sitio web
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</MainLayout>

<script>
  // This is a self-executing anonymous function that runs as soon as the page is ready.
  (function() {
    // This tells TypeScript about our custom timer property on the Window object.
    const TARGET_DATE = new Date("2026-09-30T06:30:00+02:00");

    const lang = document.documentElement.lang.startsWith("es") ? "es" : "en";

    const i18n = {
      en: {
        begins: (dateStr) => `The challenge begins on ${dateStr}`,
        underway: "The ride is underway! Follow the progress.",
        units: { year: ["Year", "Years"], day: ["Day", "Days"], hour: ["Hour", "Hours"], minute: ["Minute", "Minutes"], second: ["Second", "Seconds"], },
        dateLocale: "en-GB",
      },
      es: {
        begins: (dateStr) => `El reto comienza el ${dateStr}`,
        underway: "¡La ruta está en marcha! Sigue el progreso.",
        units: { year: ["Año", "Años"], day: ["Día", "Días"], hour: ["Hora", "Horas"], minute: ["Minuto", "Minutos"], second: ["Segundo", "Segundos"], },
        dateLocale: "es-ES",
      },
    }[lang];

    const displayEl = document.getElementById("cd-display");
    const msgEl = document.getElementById("cd-message");
    const countdownContainer = document.getElementById("countdown");

    if (!displayEl || !msgEl || !countdownContainer) {
      return;
    }

    if (window.countdownTimer) {
      clearInterval(window.countdownTimer);
    }

    function updateCountdown() {
      const now = new Date();
      const diff = TARGET_DATE.getTime() - now.getTime();

      if (diff <= 0) {
        msgEl.classList.remove("hidden");
        msgEl.textContent = i18n.underway;
        countdownContainer.innerHTML = "";
        clearInterval(window.countdownTimer);
        return;
      }

      let days = Math.floor(diff / (1000 * 60 * 60 * 24));
      let hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      let minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      let seconds = Math.floor((diff % (1000 * 60)) / 1000);

      const years = Math.floor(days / 365);
      days %= 365;
      
      function label(units, n) {
        return n === 1 ? units[0] : units[1];
      }
      
      const parts = [];
      if (years > 0) parts.push(`<div class="text-center"><div class="font-bold text-2xl md:text-3xl">${years}</div><div class="text-xs">${label(i18n.units.year, years)}</div></div>`);
      if (days > 0 || years > 0) parts.push(`<div class="text-center"><div class="font-bold text-2xl md:text-3xl">${days}</div><div class="text-xs">${label(i18n.units.day, days)}</div></div>`);
      if (hours > 0 || days > 0 || years > 0) parts.push(`<div class="text-center"><div class="font-bold text-2xl md:text-3xl">${hours}</div><div class="text-xs">${label(i18n.units.hour, hours)}</div></div>`);
      parts.push(`<div class="text-center"><div class="font-bold text-2xl md:text-3xl">${minutes}</div><div class="text-xs">${label(i18n.units.minute, minutes)}</div></div>`);
      parts.push(`<div class="text-center"><div class="font-bold text-2xl md:text-3xl">${seconds}</div><div class="text-xs">${label(i18n.units.second, seconds)}</div></div>`);
      
      displayEl.innerHTML = parts.join('<div class="text-2xl md:text-3xl font-bold">:</div>');
      const targetLocaleString = TARGET_DATE.toLocaleString(i18n.dateLocale, { day: '2-digit', month: 'long', year: 'numeric', timeZone: "Europe/Madrid" });
      msgEl.textContent = i18n.begins(targetLocaleString);
    }

    updateCountdown();
    window.countdownTimer = setInterval(updateCountdown, 1000);
  })();
</script>